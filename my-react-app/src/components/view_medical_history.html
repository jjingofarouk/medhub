<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Medical History</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

</head>
<body>

    <div class="sidebar">
        <a href="{{ url_for('bp.index') }}"><h2>MedHub</h2></a>
        <a href="{{ url_for('bp.manage_appointments') }}">Manage Appointments</a>
        <a href="{{ url_for('bp.book_appointment') }}">Book Appointment</a>
        <a href="{{ url_for('bp.rebook_appointment') }}">ReBook Appointment</a>
        <a href="{{ url_for('bp.cancel_appointment') }}">Cancel Appointment</a>
        <a href="{{ url_for('bp.view_doctor_availability') }}">View Doctor Availability</a>
        <a href="{{ url_for('bp.edit_availability') }}" class="active">Edit Availability</a>
        <a href="{{ url_for('bp.consultations') }}">Start Consultation</a>
        <a href="{{ url_for('bp.view_medical_history') }}">View Medical History</a>
    </div>
    <div class="container">
        <h1>View Medical History</h1>
        <form method="POST">
            <label for="patient_id">Patient ID:</label>
            <input type="text" id="patient_id" name="patient_id" required>
            <input type="submit" value="View Medical History">
        </form>
        
        {% if patient %}
            <div class="patient-info">
                <h2>Patient Information</h2>
                <p><strong>Name:</strong> {{ patient['name'] }}</p>
                <p><strong>Date of Birth:</strong> {{ patient['dob'] }}</p>
                <p><strong>Contact:</strong> {{ patient['contact'] }}</p>
                <p><strong>Address:</strong> {{ patient['address'] }}</p>
            </div>

            {% if history %}
                <div class="history-info">
                    <h2>Medical History</h2>
                    <ul>
                        {% for entry in history %}
                            <li>
                                <strong>Date:</strong> {{ entry['date'] }}<br>
                                <strong>Reason for Visit:</strong> {{ entry['visit_reason'] }}<br>
                                <strong>Diagnosis:</strong> {{ entry['diagnosis'] }}<br>
                                <strong>Prescription:</strong> {{ entry['prescription'] }}<br>
                                <strong>Tests Results:</strong> {{ entry['test_results'] }}<br>
                                <strong>Treatment Plan:</strong> {{ entry['treatment_plan'] }}<br>
                                <strong>Allergies:</strong> {{ entry['allergies'] }}<br>
                                <strong>Past Surgeries:</strong> {{ entry['past_surgeries'] }}<br>
                                <strong>Chronic Conditions:</strong> {{ entry['chronic_conditions'] }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% else %}
                <p>No medical history available.</p>
            {% endif %}
        {% endif %}
        
        <a href="{{ url_for('bp.index') }}">Back to Home</a>
    </div>
    <footer>
        <div class="footer-links">
            <p>&copy; 2024 MedHub. All rights reserved.</p>
            <a href="{{ url_for('bp.index') }}">Back Home</a>
            <a href="{{ url_for('bp.privacy_policy') }}">Privacy Policy</a>
            <a href="{{ url_for('bp.terms_of_service') }}">Terms of Service</a>
            <a href="{{ url_for('bp.support') }}">Get Support</a>
            <a href="{{ url_for('bp.view_medical_history') }}">View Medical History</a>
            <a href="{{ url_for('bp.forum') }}">Forums</a>
            <a href="{{ url_for('bp.contact_us') }}">Contact Us</a>
        </div>
    </footer>
    
</body>
</html>
